# Downloaded from https://raw.githubusercontent.com/score-spec/community-provisioners/refs/heads/main/score-compose/10-redis-dapr-state-store.provisioners.yaml at 2025-03-08 20:38:01.783137261 +0000 UTC m=+0.363557541
- uri: template://default-provisioners/dapr-subscription
  type: dapr-subscription
  class: default
  init: |
    subscriptionName: {{ .Params.topic }}-subscription-{{ randAlphaNum 6 }}
  state: |
    subscriptionName: {{ dig "subscriptionName" .Init.subscriptionName .State | quote }}
  outputs: |
    name: {{ .State.subscriptionName }}
    topic: {{ .Params.topic }}
  expected_outputs:
    - name
    - topic
  files: |
    components/{{ .State.subscriptionName }}.yaml: |
      apiVersion: dapr.io/v2alpha1
      kind: Subscription
      metadata:
        name: {{ .State.subscriptionName }}
      spec:
        topic: {{ .Params.topic }}
        routes:
          default: /{{ .Params.topic }}
        pubsubname: {{ .Params.pubsub }}
      scopes:
        - {{ .SourceWorkload }}